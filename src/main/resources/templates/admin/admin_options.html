<!DOCTYPE html>
<html lang="zh-cmn-Hans" xmlns:th="http://www.thymeleaf.org" xmlns:thSys="">
<div th:replace="admin/module/macros :: head"></div>
<body class="app sidebar-mini rtl">
	<main class="app-content">
	<div th:replace="admin/module/macros :: header"></div>
	<div th:replace="admin/module/macros :: sidebar"></div>
	<div class="app-title">
		<div>
			<h1>
				<i class="fa fa-dashboard"></i> 博客设置
			</h1>
		</div>
		<ul class="app-breadcrumb breadcrumb">
			<li class="breadcrumb-item"><i class="fa fa-home fa-lg"></i></li>
			<li class="breadcrumb-item"><a href="#">博客设置</a></li>
		</ul>
	</div>
	<div class="row">
		<div class="col-lg-12 col-md-12 tile">
			<div class="row">
				<ul class="nav nav-tabs" role="tablist">
					<li class="nav-item"><a class="nav-link active"
						data-toggle="tab" href="#routine">常规设置</a></li>
					<li class="nav-item"><a class="nav-link" data-toggle="tab"
						href="#seo">SEO设置</a></li>
					<li class="nav-item"><a class="nav-link" data-toggle="tab"
						href="#article">文章设置</a></li>
					<li class="nav-item"><a class="nav-link" data-toggle="tab"
						href="#comment">评论设置</a></li>
					<li class="nav-item"><a class="nav-link" data-toggle="tab"
						href="#attachment">附件设置</a></li>
					<li class="nav-item"><a class="nav-link" data-toggle="tab"
						href="#admin">后台设置</a></li>
					<li class="nav-item"><a class="nav-link" data-toggle="tab"
						href="#email">邮箱设置</a></li>
					<li class="nav-item"><a class="nav-link" data-toggle="tab"
						href="#other">其他设置</a></li>
				</ul>
			</div>
			<!-- Tab panes -->
			<div class="tab-content">
				<div id="routine" class="tab-pane active ">
					<form class="form-horizontal" id="commonOptions">
						<div class="form-group row">
							<label class="col-form-label col-md-2">博客标题：</label>
							<div class="col-md-5">
								<input class="form-control" type="text" name="blog_name" th:value="${session.options?.blog_name}">
							</div>
						</div>
						<div class="form-group row">
							<label class="col-form-label col-md-2">博客地址：</label>
							<div class="col-md-5">
								<input class="form-control" type="text" name="blog_url" th:value="${session.options?.blog_url}">
							</div>
						</div>
						<div class="form-group row">
							<label class="col-form-label col-md-2">LOGO：</label>
							<div class="col-md-5">
							<div class="input-group">
								<input class="form-control" type="text" name="blog_logo" id="blog_logo" th:value="${session.options?.blog_logo}">
								<span class="input-group-btn">
								<button class="btn btn-default " type="button" th:onclick="'javascript:openChoice(\''+blog_logo+'\')'">选择</button>
								</span>
								</div>
							</div>
						</div>
						<div class="form-group row">
							<label class="control-label col-md-2">页脚信息：</label>
							<div class="col-md-5">
								<div class="input-group">
									<textarea class="form-control" title="支持HTML" rows="3" th:text="${session.options?.blog_footer}" th:value="${session.options?.blog_footer}" id=""
										name="blog_footer" style="resize: none"></textarea>
								</div>
							</div>
						</div>
						<div class="tile-footer">
							<div class="row">
								<div class="col-md-8 col-md-offset-3">
									<button class="btn btn-outline-primary" type="button" onclick="save('commonOptions')">
										<i class="fa fa-fw fa-lg fa-check-circle"></i>保存
									</button>
								</div>
							</div>
						</div>
					</form>
				</div>
				<!-- SEO表单 -->
				<div id="seo" class="tab-pane fade">
					<form class="form-horizontal" id="seoOptions">
						<div class="form-group row">
							<label class="col-form-label col-md-2">关键词： <span
								data-toggle="tooltip" data-placement="top" title="多个关键词使用,隔开"
								style="cursor: pointer"> <i class="fa fa-question-circle"
									aria-hidden="true"></i>
							</span></label>
							<div class="col-md-5">
								<input class="form-control" type="text" name="seo_keyword">
							</div>
						</div>
						<div class="form-group row">
							<label class="col-form-label col-md-2">博客描述：</label>
							<div class="col-md-5">
								<input class="form-control" type="text" name="seo_describe">
							</div>
						</div>
						<div class="form-group row">
							<label class="col-form-label col-md-2">百度推送token： <span
								data-toggle="tooltip" data-placement="top" title="百度站长平台获取"
								style="cursor: pointer"> <i class="fa fa-question-circle"
									aria-hidden="true"></i>
							</span></label>
							<div class="col-md-5">
								<div class="input-group">
									<input type="text" class="form-control" id="baiduToken" th:value="${session.options?.seo_baidu_token}" name="seo_baidu_token">
									<span class="input-group-btn">
										<button class="btn btn-default" onclick="pushBaidu()" type="button">推送</button>
									</span>
								</div>
							</div>
						</div>
						<div class="tile-footer">
							<div class="row">
								<div class="col-md-8 col-md-offset-3">
									<button class="btn btn-outline-primary" type="button" onclick="save('seoOptions')">
										<i class="fa fa-fw fa-lg fa-check-circle"></i>保存
									</button>
								</div>
							</div>
						</div>
					</form>
				</div>
				<!-- 文章 -->
				<div id="article" class="tab-pane fade">
					<form class="form-horizontal">
						<div class="form-group row">
							<label class="col-form-label col-md-2">首页显示条数： <span
								data-toggle="tooltip" data-placement="top" title="默认为10条"
								style="cursor: pointer"> <i class="fa fa-question-circle"
									aria-hidden="true"></i>
							</span></label>
							<div class="col-md-5">
								<input class="form-control" type="text">
							</div>
						</div>
						<div class="form-group row">
							<label class="col-form-label col-md-2">RSS显示条数：</label>
							<div class="col-md-5">
								<input class="form-control" type="text">
							</div>
						</div>
						<div class="form-group row">
							<label class="col-form-label col-md-2">文章摘要字数：</label>
							<div class="col-md-5">
								<div class="input-group">
									<input type="text" class="form-control" id="" name="">
									<span class="input-group-btn">
										<button class="btn btn-default " id="" type="button">更新</button>
									</span>
								</div>
							</div>
						</div>
						<div class="tile-footer">
							<div class="row">
								<div class="col-md-8 col-md-offset-3">
									<button class="btn btn-outline-primary" type="button" onclick="">
										<i class="fa fa-fw fa-lg fa-check-circle"></i>保存
									</button>
								</div>
							</div>
						</div>
					</form>
				</div>
				<!-- 评论 -->
				<div id="comment" class="tab-pane fade">
					<form class="form-horizontal">
						
					</form>
				</div>
				<!-- 附件 -->
				<div id="attachment" class="tab-pane fade">
					<form class="form-horizontal">
						
					</form>
				</div>
			</div>
		</div>
	</div>
	</main>
	<div th:replace="admin/module/macros :: comm"></div>
	<script src="/plugins/layer/layer.js"></script>
	<script type="text/javascript">
	//保存设置项
	 function save(id){
		var from =$("#"+id).serialize();
		$.ajax({
			type:"post",
			url:"/admin/options/save",
			data:from,
			dataType:"json",
			success:function(data){
				showMsg(data.msg,"success",3000)
			}
		});
	}
	//选择logo
	function openChoice(id) {
		layer.open({
			type : 2,
			title : '所有附件',
			anim : 2,
			area : [ '90%', '90%' ],
			shadeClose : true,
			content : "/admin/profile/openChoice?id=" + id,
			maxmin : true
		});
	} 
	 //推送百度
	function pushBaidu(){
		 var token= $("#baiduToken").val();
		$.ajax({
			url:"/admin/article/pushBaidu",
			type:"post",
			data:{token:token},
			dataType:"json",
			success:function(data){
				if(data.flag==true){
					showMsg(data.msg,"success",3000);
				}else if(data.flag==false){
					showMsg(data.msg,"error",3000);
				}
			}
		});
	} 
	</script>
</body>
</html>